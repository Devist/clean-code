# 😎 함수 - 요약정리

## 작게 만들어라

- 함수 만드는 규칙은 첫째도, 둘째도 '더 작게'
- If 문 / else 문 / while 문 등에 들어가는 블록은 한 줄이어야 한다
  - 대게 거기서 함수를 호출
- 함수에서 들여쓰기 수준은 1단이나 2단을 넘어서면 안된다 -> 읽기 쉬워진다.

## 한가지만 해라

- 그 '한 가지'가 무엇인가? -> To 문단으로 기술 가능한것
  - Ex) TO RenderPageWithSetupsAndTeardowns, 페이지가 테스트 페이지인지 확인한 후 테스트 페이지라면 설정 페이지와 해제 페이지를 넣는다. 테스트 페이지든 아니든 페이지를 HTML로 렌더링한다.
- **지정된 함수 이름 아래**에서 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 한다.
  - 우리가 함수를 만드는 이유는 큰 개념을 다음 추상화 수준에서 여러 단계로 나눠 수행하기 위해서이다.
- 단순히 다른 표현이 아니라, 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다.

## 함수 당 추상화 수준은 하나로

- 함수가 확실히 '한 가지' 작업만 하려면 함수 내 모든 문장의 추상화 수준이 동일해야 한다.
- 한 함수 내에 추상화 수준을 섞으면 코드를 읽는 사람이 헷갈린다.
  - 더 큰 문제는, 근본 개념과 세부사항을 뒤섞기 시작하면, 깨어진 창문처럼 사람들이 함수에 세부사항을 점점 더 추가한다.
- **위에서 아래로 코드 읽기: 내려가기 규칙**
  - 한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 온다.
    - 위에서 아래로 코드를 읽으면, 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.

## Switch 문은 구리다

- SRP(Single Responsibility Princiiple, 단일 책임의 원칙) 을 위반한다.
- OCP(Open Closed Principle, 개방-폐쇠의 원칙)을 위반한다.
- 해결방안
  - 추상 팩토리에 숨겨 아무에게도 보여주지 않는다. (상속 관계로 숨긴 후, 절대로 다른 코드에 노출하지 않는다.)

## 서술적인 이름을 사용하라

## 명령과 조회를 분리하라

## 오류 코드보다 예외를 사용하라

- 명령 함수에서 오류 코드를 반환하는 방식은 명령/조회 분리 규칙을 미묘하게 위반한다. 자칫하면 if 문에서 명령을 표현식으로 사용하기 쉬운 탓이다.

  - 반면 오류 코드 대신 예외를 사용하면 오류 처리 코드가 원래 코드에서 분리되므로 코드가 깔끔해진다.

    ```java
    // bad case
    if (deletePage(page) == E_OK) {
      if (registry.deleteReference(page.name) == E_OK){
        if (configKeys.deleteKey(page.name.makeKey()) == E_OK) {
          logger.log("page deleted")
        } else {
          logger.log("configKey not deleted")
        } 
      } else {
        logger.log("deleteReference from registry failed")
      }
    } else {
      logger.log("delete failed")
        return E_ERROR
    }
    
    // good case
    try {
      deletePage(page);
      registry.deleteReference(page.name);
      configKeys.deleteKey(page.name.makeKey());
    } 
    catch (Exception e) {
      logger.log(e.getMessage());
    }
    ```

  - Try / Catch 블록 뽑아내기

    - Try/catch 블록은 원래 다음의 이유로 추하다.
      - 코드 구조에 혼란을 일으킴
      - 정상 동작과 오류 처리 동작을 뒤섞는다.
    - 따라서 try/ catch 블록을 별도 함수로 뽑아내는 편이 좋다.

## 반복하지 마라

어쩌면 중복은 소프트웨어에서 모든 악의 근원이다. 많은 원칙과 기법이 중복을 없애거나 제어할 목적으로 나왔다.





# 😎 함수 - 리뷰 복습

