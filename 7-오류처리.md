# ğŸ˜ ì˜¤ë¥˜ ì²˜ë¦¬ - ë…ì„œ ì •ë¦¬

ê¹¨ë—í•œ ì½”ë“œì™€ ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” í™•ì‹¤íˆ ì—°ê´€ì„±ì´ ìˆë‹¤. ìƒë‹¹ìˆ˜ ì½”ë“œ ê¸°ë°˜ì€ ì „ì ìœ¼ë¡œ ì˜¤ë¥˜ ì²˜ë¦¬ ì½”ë“œì— ì¢Œìš°ëœë‹¤.

- í©ì–´ì§„ ì˜¤ë¥˜ ì²˜ë¦¬ ì½”ë“œ ë•Œë¬¸ì—, ì‹¤ì œ ì½”ë“œê°€ í•˜ëŠ” ì¼ì„ íŒŒì•…í•˜ê¸°ê°€ ê±°ì˜ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì˜ë¯¸
- ì˜¤ë¥˜ ì²˜ë¦¬ëŠ” ì¤‘ìš”í•˜ë‹¤.
- **ì˜¤ë¥˜ ì²˜ë¦¬ ì½”ë“œë¡œ ì¸í•´, í”„ë¡œê·¸ë¨ ë…¼ë¦¬ë¥¼ ì´í•´í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤ë©´ ê¹¨ë—í•œ ì½”ë“œë¼ ë¶€ë¥´ê¸° ì–´ë µë‹¤.**



## ğŸ˜± ì˜¤ë¥˜ ì½”ë“œë³´ë‹¤ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ì

- ì˜ˆì™¸ë€? ***í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ì— ì •ìƒì ì¸ í”„ë¡œê·¸ë¨ì˜ íë¦„ì— ì–´ê¸‹ë‚˜ëŠ” ì´ë²¤íŠ¸***

- í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì¦‰ì‹œ ì˜¤ë¥˜ë¥¼ í™•ì¸í•˜ëŠ” ì½”ë“œëŠ” êµ¬ë¦¬ë‹¤. ì°¨ë¼ë¦¬ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ê²Œ ë‚«ë‹¤. ë…¼ë¦¬ê°€ ì˜¤ë¥˜ ì²˜ë¦¬ ì½”ë“œì™€ ë’¤ì„ì´ì§€ ì•Šìœ¼ë‹ˆê¹Œ

  ```java
  // BAD (ì˜¤ë¥˜ í™•ì¸ ì½”ë“œ)
  public class DeviceController{
    ...
    public void sendShutDown() {
      DeviceHandle handle = getHandle(DEV1); 
      // ë””ë°”ì´ìŠ¤ ìƒíƒœ ì ê²€
      if (handle != DeviceHandle.INVALID) {
        // ë ˆì½”ë“œ í•„ë“œì— ë””ë°”ì´ìŠ¤ ìƒíƒœ ì €ì¥
        retrieveDeviceRecord(handle);
        // ë””ë°”ì´ìŠ¤ê°€ ì¼ì‹œì •ì§€ ìƒíƒœê°€ ì•„ë‹ˆë¼ë©´ ì¢…ë£Œ
        if (record.getStatus() != DEVICE_USPENDED) {
          pauseDevice(handle);
          clearDeviceWorkQueue(handle);
          closeDevice(handle);
        } else {
          logger.log("Device suspended. Unable to shut down");
        }
      } else {
        logger.log("Invalid handle for: " + DEV1.toString());
      }
    }
    ...
  }
  
  // GOOD (ì˜ˆì™¸ ì‚¬ìš©)
  // ë””ë°”ì´ìŠ¤ ì¢…ë£Œ ì•Œê³ ë¦¬ì¦˜ê³¼ ì˜¤ë¥˜ ì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ì´ ë¶„ë¦¬ëë‹¤.
  public class DeviceController{
    ...
    public void sendShutDown() {
      try {
        tryToShutDown();
      } catch (DeviceShutDownError e) {
        logger.log(e);
      }
    }
    
    private void tryToShutDown() throws DeviceShutDownError {
      DeviceHandle handle = getHandle(DEV1);
      DeviceRecord record = retrieveDeviceRecord(handle);
      
      pauseDevice(handle);
      clearDeviceWorkQueue(handle);
      closeDevice(handle);
    }
    
    private DeviceHandle getHandle(DeviceID id) {
      throw new DeviceShutDownError("Invalid handle for: " + id.toString());
      ...
    }
    ...
  }
  ```

   



## ğŸ˜± Try-Catch-Finally ë¬¸ë¶€í„° ì‘ì„±í•˜ë¼

 ì˜ˆì™¸ê°€ ë°œìƒí•  ì½”ë“œë¥¼ ì§¤ ë•ŒëŠ” try-catch-finally ë¬¸ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” í¸ì´ ë‚«ë‹¤.

- Try ë¸”ë¡ì—ì„œ ë¬´ìŠ¨ ì¼ì´ ìƒê¸°ë“ ì§€, í˜¸ì¶œìê°€ ê¸°ëŒ€í•˜ëŠ” ìƒíƒœë¥¼ ì •ì˜í•˜ê¸° ì‰¬ì›Œì§„ë‹¤.
- TDDì—ì„œ ë¨¼ì € ê°•ì œë¡œ ì˜ˆì™¸ë¥¼ ì¼ìœ¼í‚¤ëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•œ í›„ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´, ìì—°ìŠ¤ëŸ½ê²Œ try ë¸”ë¡ì˜ íŠ¸ëœì­ì…˜ ë²”ìœ„ë¶€í„° êµ¬í˜„í•˜ê²Œ ë˜ì–´ ë²”ìœ„ ë‚´ì—ì„œ íŠ¸ëœì­ì…˜ ë³¸ì§ˆì„ ìœ ì§€í•˜ê¸° ì‰¬ì›Œì§„ë‹¤.



## ğŸ˜± ë¯¸í™•ì¸(unchecked) ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ë¼

ì˜ˆì „ì— ë©”ì„œë“œë¥¼ ì„ ì–¸í•  ë•ŒëŠ”, ë©”ì„œë“œê°€ ë°˜í™˜í•  ì˜ˆì™¸ë¥¼ ëª¨ë‘ ì—´ê±°í–ˆë‹¤.

ì´ëŸ¬í•œ **í™•ì¸ëœ ì˜¤ë¥˜** ê°€, ì¹˜ë¥´ëŠ” ë¹„ìš©ì— ìƒì‘í•˜ëŠ” ì´ìµì„ ì œê³µí•˜ëŠ”ì§€ ì² ì €íˆ ë”°ì ¸ì•¼ í•œë‹¤.

- í™•ì¸ëœ ì˜ˆì™¸ëŠ”  OCP(ê°œë°©, íì‡„ì˜ ì›ì¹™)ì„ ìœ„ë°˜í•œë‹¤.
  - í•˜ìœ„ ë‹¨ê³„ì—ì„œ ì½”ë“œë¥¼ ë³€ê²½í•˜ë©´ ìƒìœ„ ë‹¨ê³„ ë©”ì„œë“œ ì„ ì–¸ë¶€ë¥¼ ì „ë¶€ ê³ ì³ì•¼ í•œë‹¤.
- **ë•Œë¡œëŠ” í™•ì¸ëœ ì˜ˆì™¸ë„ ìœ ìš©í•˜ì§€ë§Œ, ì¼ë°˜ì  ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì˜ì¡´ì„±ì´ë¼ëŠ” ë¹„ìš©ì´ ì´ìµë³´ë‹¤ í¬ë‹¤.**



#### [ í™•ì¸ëœ ì˜ˆì™¸(checked exception) ]

- ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ í™•ì¸ë˜ë©° **ë°˜ë“œì‹œ ë³„ë„ë¡œ ì²˜ë¦¬**í•´ì•¼ í•˜ëŠ” ì˜ˆì™¸
  - í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ í†µì œí•  ìˆ˜ ì—†ëŠ” ì¡°ê±´ ë•Œë¬¸ì— ë°œìƒ (Ex) ì˜ˆë¥¼ë“¤ì–´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì™¸ë¶€ íŒŒì¼ì„ ì‚¬ìš©í•  ë•Œ ë°œìƒ)
    - IOException
    - SQLException
- íŒŒì¼ ì—´ê¸°ì™€ ê°™ì´ ì •í™•í•œ ì½”ë“œë¡œ êµ¬í˜„í–ˆìŒì—ë„, ì™¸ë¶€ í™˜ê²½(íŒŒì¼ì´ ì—†ëŠ” ìƒí™© ë“±)ì— ë”°ë¼ ë°œìƒ ê°€ëŠ¥
- ì˜ˆì™¸ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šìœ¼ë©´ ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ (ì»´íŒŒì¼ ì‹œ í™•ì¸í•´ì„œ í™•ì¸ëœ ì˜ˆì™¸)
- RuntimeException ì´ì™¸ì˜ ì˜ˆì™¸ë“¤

#### [ ë¯¸í™•ì¸ ì˜ˆì™¸(unchecked exception) ]

- ì‹¤í–‰ ë‹¨ê³„ì—ì„œ í™•ì¸ë˜ë©° ëª…ì‹œì ì¸ ì²˜ë¦¬ë¥¼ ê°•ì œí•˜ì§€ëŠ” ì•ŠëŠ” ì˜ˆì™¸ (ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ í™•ì¸í•˜ì§€ ì•ŠìŒ = ë¯¸í™•ì¸ ì˜ˆì™¸)
  -  RuntimeExcepionê³¼ ì§ê°„ì ‘ì ìœ¼ë¡œ ê´€ë ¨ëœ ê°ì²´
  - ì˜ëª» êµ¬í˜„ëœ í”„ë¡œê·¸ë¨ ì½”ë“œ ë•Œë¬¸ì— ë°œìƒ
  - ì ì ˆí•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ì•ˆí•  ê²½ìš°, í”„ë¡œê·¸ë¨ ê°•ì œ ì¢…ë£Œë¥¼ ì¼ìœ¼í‚´
    - NullPointerExceiption
    - IllegalArgumentException
    - IndexOutOfBoundException
    - SystemException



## ğŸ˜± ì˜ˆì™¸ì— ì˜ë¯¸ë¥¼ ì œê³µí•˜ë¼

ì˜¤ë¥˜ê°€ ë°œìƒí•œ ì›ì¸ê³¼ ìœ„ì¹˜ë¥¼ ì°¾ê¸° ì‰½ë„ë¡, ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ë•ŒëŠ” ì „í›„ ìƒí™©ì„ ì¶©ë¶„íˆ ë§ë¶™ì¸ë‹¤.

- ì˜¤ë¥˜ ë©”ì‹œì§€ì— ì •ë³´ë¥¼ ë‹´ì•„ ì˜ˆì™¸ì™€ í•¨ê»˜ ë˜ì§„ë‹¤.
- ì‹¤íŒ¨í•œ ì—°ì‚° ì´ë¦„ê³¼ ì‹¤íŒ¨ ìœ í˜•ë„ ì–¸ê¸‰
- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¡œê¹… ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤ë©´, catch ë¸”ë¡ì—ì„œ ì˜¤ë¥˜ë¥¼ ê¸°ë¡í•˜ë„ë¡ ì¶©ë¶„í•œ ì •ë³´ë¥¼ ë„˜ê²¨ì¤€ë‹¤.



## ğŸ˜± í˜¸ì¶œìë¥¼ ê³ ë ¤í•´ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ë¼

ì˜¤ë¥˜ì˜ ë¶„ë¥˜ ë°©ë²•ì€ ìˆ˜ì—†ì´ ë§ë‹¤. 

- ì»´í¬ë„ŒíŠ¸ ë¶„ë¥˜
- ìœ í˜•ìœ¼ë¡œ ë¶„ë¥˜
  - ë””ë°”ì´ìŠ¤ ì‹¤íŒ¨
  - ë„¤íŠ¸ì›Œí¬ ì‹¤íŒ¨
  - í”„ë¡œê·¸ë˜ë° ì˜¤ë¥˜

ë“±.

í•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì˜¤ë¥˜ ì •ì˜ì‹œ ê°€ì¥ ì¤‘ìš”í•œ ê´€ì‹¬ì‚¬ëŠ”, **ì˜¤ë¥˜ëŠ” ì¡ì•„ë‚´ëŠ” ë°©ë²•** ì´ ë˜ì–´ì•¼ í•œë‹¤.

ì•„ë˜ ì½”ë“œëŠ” ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ê³ ì¹˜ê¸°ê°€ ì‰½ë‹¤. í˜¸ì¶œí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ APIë¥¼ ê°ì‹¸ë©´ì„œ ì˜ˆì™¸ ìœ í˜• í•˜ë‚˜ë¥¼ ë°˜í™˜í•˜ë©´ ëœë‹¤.

```java
LocalPort port = new LocalPort(12);
try {
  port.open();
} catch (PortDeviceFailure e) {
  reportError(e);
  logger.log(e.getMessage(),e);
} finally {
  ...
}
```

ì—¬ê¸°ì„œ LocalPort í´ë˜ìŠ¤ëŠ” ë‹¨ìˆœíˆ ACMEPort í´ë˜ìŠ¤ê°€ ë˜ì§€ëŠ” ì˜ˆì™¸ë¥¼ ì¡ì•„ ë³€í™˜í•˜ëŠ” **ê°ì‹¸ê¸°(wrapper) í´ë˜ìŠ¤**ì¼ ë¿ì´ë‹¤.

```typescript
public class LocalPort {
	private ACMEPort innerPort;
  
  public LocalPort(int portNumber) {
    innerPort = new ACMEPort(portNumber);
  }
  
  public void open() {
    try {
      innerPort.open();
    } catch (DeviceResponseException e) {
      throw new PortDeviceFailure(e);
    } catch (ATM1212UnlockedException e) {
      throw new PortDeviceFailure(e);
    } catch (GMXError e) {
      throw new PortDeviceFailure(e);
    }
  }
  
  ...
}
```

#### ê°ì‹¸ê¸°(wrapper) ê¸°ë²•

ì™¸ë¶€ APIë¥¼ ì‚¬ìš©í•  ë•Œ ì¢‹ë‹¤. 

- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í”„ë¡œê·¸ë¨ ì‚¬ì´ì˜ ì˜ì¡´ì„±ì´ í¬ê²Œ ì¤„ì–´ë“¦
- í…ŒìŠ¤íŠ¸ê°€ ì‰½ë‹¤
- íŠ¹ì • ì—…ì²´ì˜ API ì„¤ê³„ ë°©ì‹ì— ë°œëª© ì¡íˆì§€ ì•ŠëŠ”ë‹¤.
  - ë„¤íŠ¸ì›Œí¬ì— ì ìš©í•´ë³¼ê¹Œ (ì—ëŸ¬ì½”ë“œ ìƒê´€ ì—†ì´,,)



## ğŸ˜± ì •ìƒ íë¦„ì„ ì •ì˜í•˜ë¼

ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ, ëŒ€ë¶€ë¶„ ì˜¤ë¥˜ ì²˜ë¦¬ê°€ ì˜ ë¶„ë¦¬ëœ ì½”ë“œê°€ ë‚˜ì˜¤ì§€ë§Œ, ë•Œë¡œëŠ” ì¤‘ë‹¨ì´ ì í•©í•˜ì§€ ì•Šì€ ë•Œë„ ìˆë‹¤.

-> íŠ¹ìˆ˜ ì‚¬ë¡€ íŒ¨í„´(í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê±°ë‚˜ ê°ì²´ë¥¼ ì¡°ì‘í•´ íŠ¹ìˆ˜ ì‚¬ë¡€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹)ìœ¼ë¡œ ì²˜ë¦¬



## ğŸ˜± nullì„ ë°˜í™˜í•˜ì§€ ë§ˆë¼

nullì„ ë°˜í™˜í•˜ëŠ” ìŠµê´€ì„ ë²„ë¦¬ì. í•œì¤„ ê±´ê±° í•˜ë‚˜ì”© nullì„ í™•ì¸í•˜ëŠ” ì½”ë“œë¡œ ê°€ë“í•œ ì• í”Œë ˆì´ì…˜ì€, ì¼ê±°ë¦¬ë¥¼ ëŠ˜ë¦´ ë¿ë§Œ ì•„ë‹ˆë¼ í˜¸ì¶œìì—ê²Œ ë¬¸ì œë¥¼ ë– ë„˜ê¸´ë‹¤.

- ë©”ì„œë“œì—ì„œ nullì„ ë°˜í™˜í•˜ê³ í”ˆ ìœ í˜¹ì´ ë“ ë‹¤ë©´, ê·¸ ëŒ€ì‹  ì˜ˆì™¸ë¥¼ ë˜ì§€ê±°ë‚˜ íŠ¹ìˆ˜ì‚¬ë¡€ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
- ì‚¬ìš©í•˜ë ¤ëŠ” ì™¸ë¶€ APIê°€ nullì„ ë°˜í™˜í•˜ë©´, wrapper ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ ì˜ˆì™¸ë¥¼ ë˜ì§€ê±°ë‚˜ íŠ¹ìˆ˜ì‚¬ë¡€ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.



```java
// bad case
// getEmployeesëŠ” nullë„ ë°˜í™˜í•œë‹¤.
List<Employee> employees = getEmployees();
if (employees != null) {
  for(Employee e : employees) {
    totalPay += e.getPay();
  }
}

// good case
// getEmployeesë¥¼ ë³€ê²½í•´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤ë©´ ì½”ë“œê°€ í›¨ì”¬ ê¹”ë”í•´ì§
// NullPointerExceptionì´ ë°œìƒí•  ê°€ëŠ¥ì„±ë„ ì¤„ì–´ë“ ë‹¤.
List<Employee> employees = getEmployees();
  for(Employee e : employees) {
    totalPay += e.getPay();
  }
}

public List<Employee> getEmployees() {
  if (..ì§ì›ì´ ì—†ë‹¤ë©´ ..)
    return Collections.emptyList();
}
```





## ğŸ˜± nullì„ ì „ë‹¬í•˜ì§€ ë§ˆë¼

ë©”ì„œë“œì—ì„œ nullì„ ë°˜í™˜í•˜ëŠ” ê²ƒë„ ë‚˜ì˜ì§€ë§Œ, **ë©”ì„œë“œë¡œ nullì„ ì „ë‹¬í•˜ëŠ” ë°©ì‹ì€ ë” ë‚˜ì˜ë‹¤.**

- ë©”ì„œë“œë¡œ nullì„ ì „ë‹¬í•˜ëŠ” ì½”ë“œëŠ” ìµœëŒ€í•œ í”¼í•œë‹¤. (ì •ìƒì  ì¸ìˆ˜ë¡œ nullì„ ê¸°ëŒ€í•˜ëŠ” APIê°€ ì•„ë‹ˆë¼ë©´)
  - ì‹¤í–‰ ì˜¤ë¥˜ê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆë‹¤.
  - ëŒ€ë‹¤ìˆ˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ëŠ” í˜¸ì¶œìê°€ ì‹¤ìˆ˜ë¡œ ë„˜ê¸°ëŠ” nullì„ ì ì ˆíˆ ì²˜ë¦¬í•˜ì§€ ëª»í•œë‹¤.





# ğŸ˜ ì˜¤ë¥˜ ì²˜ë¦¬ - ê°•ì˜ ë³µìŠµ

## 01. ì˜ˆì™¸ ì²˜ë¦¬ ë°©ì‹

ì˜¤ë¥˜ ì½”ë“œë¥¼ ë¦¬í„´í•˜ì§€ ë§ê³ , ì˜ˆì™¸ë¥¼ ë˜ì ¸ë¼

- ì˜›ë‚ ì—ëŠ” ì˜¤ë¥˜ë¥¼ ë‚˜íƒ€ë‚¼ ë•Œ ì—ëŸ¬ì½”ë“œë¥¼ ë˜ì¡Œë‹¤.
- í•˜ì§€ë§Œ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ê²ƒì´ ëª…í™•í•˜ê³ , ì²˜ë¦¬ íë¦„ì´ ê¹”ë”í•´ì§„ë‹¤.

```java
// BAD
public class DeviceController {
  ...
  public void sendShutDown(){
    if (handle != DeviceHandle.INVALID){ // here
      ...
      if (record.getStatus() != DEVICE_SUSPENDED) { // here
        ...
      }
    } 
  }
}

// GOOD (ì •ë§ êµ¿ì€ ì•„ë‹˜)
// (1) ì˜¤ë¥˜ê°€ ë°œìƒí•œ ë¶€ë¶„ì—ì„œ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤. (ë³„ë„ë¡œ ê°œë°œìì˜ ì²˜ë¦¬ê°€ í•„ìš”í•œ ì˜ˆì™¸ì´ë©´ checked exceptionìœ¼ë¡œ ë˜ì§„ë‹¤.)
// (2) checked exceptionì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ìƒìœ„ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë©”ì„œë“œ ì„ ì–¸ë¶€ì— throwsë¥¼ ëª…ì‹œí•´ì•¼ í•œë‹¤.
// (3) ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê³³ì—ì„œ catch í•˜ì—¬ ì²˜ë¦¬í•œë‹¤.
public class DeviceController {
  ...
  public void sendShutDown(){
    // here (3)
    try {
      tryToShutDown();
    } catch( DeviceShutDownError e) {
      logger.log(e);
    }
  }
  
  private void tryToShutDown() throws DeviceShutDownError { // here (2)
    DeviceHandle handle = getHandle(DEV1);
    ...
  }
  
  private DeviceHandle getHandle(DeviceID id) {
    ...
    // Deviceë¥¼ ì •ìƒì ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ë‹¤ë©´
    throw new DeviceShutDownError("Invalid handler for: " + id.toString()); // here(1)
    ...
  }
}
```



## 02. Unckecked Exceptionì„ í™œìš©í•˜ë¼

### Checked vs Unchecked Exception

![](https://user-images.githubusercontent.com/45676906/105691109-2cda9400-5f40-11eb-9003-a14873c2eaf2.png)

- **Exception**ì„ ë°”ë¡œ ìƒì†í•˜ë©´ Checked Exception
  - ëª…ì‹œì ì¸ ì˜ˆì™¸ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤.
  - Ex) IOException, SQLException
- **RuntimeException**ì„ ìƒì†í•˜ë©´ UnckeckedException
  - ëª…ì‹œì ì¸ ì˜ˆì™¸ì²˜ë¦¬ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤.
    - ëŸ°íƒ€ì„(ì‹¤í–‰) ì¤‘ì— ë°œìƒí–ˆê¸° ë•Œë¬¸ì—, ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤ëŠ” ì—ëŸ¬ì´ê¸° ë•Œë¬¸ì—, ì´ ë•ŒëŠ” ì‹¤í–‰ì¤‘ì— ë³„ë„ë¡œ ë°œìƒí•œ ì—ëŸ¬ë¼ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ì—†ì–´ì„œ ëª…ì‹œì ì¸ ì²˜ë¦¬ê°€ í•„ìš”í•˜ì§€ ì•ŠìŒ.
  - Ex) NullPointerException, IllegalArgumentException, IndexOutOfBoundException

> ì‚¬ìš©ìê°€ ì§ì ‘ êµ¬í˜„í•˜ëŠ” Unchecked throwableì€ ëª¨ë‘ RuntimeExceptionì˜ í•˜ìœ„ í´ë˜ìŠ¤ì—¬ì•¼ í•œë‹¤.
>
> Exception, RuntimeException, Errorë¥¼ ìƒì†í•˜ì§€ ì•ŠëŠ” throwableì„ ë§Œë“¤ ìˆ˜ë„ ìˆì§€ë§Œ, ì´ëŸ¬í•œ throwableì€ ì •ìƒì ì¸ ì‚¬í•­ë³´ë‹¤ ë‚˜ì„ ê²Œ í•˜ë‚˜ë„ ì—†ìœ¼ë©´ì„œ API ì‚¬ìš©ìë¥¼ í—·ê°ˆë¦¬ê²Œ í•  ë¿ì´ë¯€ë¡œ ì ˆëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ë§ì.

### Checked Exceptionì´ ë‚˜ìœ ì´ìœ 

```java
// (1) íŠ¹ì • ë©”ì†Œë“œì—ì„œ checked exceptionì„ throwí•˜ê³  ìƒìœ„ ë©”ì†Œë“œì—ì„œ ê·¸ exceptionì„ catchí•œë‹¤ë©´,
//     ëª¨ë“  ì¤‘ê°„ë‹¨ê³„ ë©”ì†Œë“œì— exceptionì„ throws í•´ì•¼ í•œë‹¤.
// (2) OCP(ê°œë°© íì‡„ ì›ì¹™) ìœ„ë°°
//     ìƒìœ„ ë ˆë²¨ ë©”ì†Œë“œì—ì„œ í•˜ìœ„ ë ˆë²¨ ë©”ì†Œë“œì˜ ë””í…Œì¼ì— ëŒ€í•´ ì•Œì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— OCP ì›ì¹™ì— ìœ„ë°°ëœë‹¤.
// (3) í•„ìš”í•œ ê²½ìš° checked exceptionì„ ì‚¬ìš©í•´ì•¼ ë˜ì§€ë§Œ ì¼ë°˜ì ì¸ ê²½ìš° ë“ë³´ë‹¤ ì‹¤ì´ ë§ë‹¤.
public class DeviceController {
  ...
  public void sendShutDown(){
    // here (3)
    try {
      tryToShutDown();
    } catch( DeviceShutDownError e) {
      logger.log(e);
    }
  }
  
  private void tryToShutDown() throws DeviceShutDownError { // here (2)
    DeviceHandle handle = getHandle(DEV1);
    ...
  }
  
  private DeviceHandle getHandle(DeviceID id) {
    ...
    // Deviceë¥¼ ì •ìƒì ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ë‹¤ë©´
    throw new DeviceShutDownError("Invalid handler for: " + id.toString()); // here(1)
    ...
  }
}
```

### Unchecked Exceptionì„ ì‚¬ìš©í•˜ì

> í™•ì¸ëœ ì˜ˆì™¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , C#, C++, íŒŒì´ì¬, ë£¨ë¹„ëŠ” ì•ˆì •ì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ êµ¬í˜„í•˜ê¸°ì— ë¬´ë¦¬ê°€ ì—†ë‹¤.



## 03. Exception ì˜ ì“°ê¸°

### - ì˜ˆì™¸ì— ë©”ì‹œì§€ ë‹´ê¸°

ì˜ˆì™¸ì— ì˜ë¯¸ìˆëŠ” ì •ë³´ ë‹´ê¸°

```java
throw new DeviceShutDownError("Invalid handle for: " + id.toString());
```

- ì˜¤ë¥˜ê°€ ë°œìƒí•œ ì›ì¸ê³¼ ìœ„ì¹˜ë¥¼ ì°¾ê¸° ì‰½ë„ë¡, ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ë•ŒëŠ” ì „í›„ ìƒí™©ì„ ì¶©ë¶„íˆ ë§ë¶™ì¸ë‹¤.
- ì‹¤íŒ¨í•œ ì—°ì‚° ì´ë¦„ê³¼ ìœ í˜• ë“± ì •ë³´ë¥¼ ë‹´ì•„ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤.

### - exception wrapper

```java
// BAD
// ìˆ˜ë§ì€ checked exceptionì´ ë°œìƒ
// checked exceptionì€ ë°˜ë“œì‹œ ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼ í•˜ì§€ë§Œ, 
// ê·¸ëŸ¬ë‚˜ ë¡œê·¸ë¥¼ ì°ì„ ë¿ í•  ìˆ˜ ìˆëŠ” ì¼ì´ ì—†ë‹¤.
ACMEPort port = new ACMEPort(12);
try {
  port.open();
} catch (DeviceResponseException e) {
  reportPortError(e);
  logger.log("Device response exception",e);
} catch (ATM1212UnlockedException e) {
  reportPortError(e);
  logger.log("Unlock exception",e);
} catch (GMXError e) {
  reportPortError(e);
  logger.log("Device response exception");
} finally {
  ...
}

// Good
// ì˜ˆì™¸ë¥¼ ê°ì‹¸ëŠ” wrapper í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤.
LocalPort port = new LocalPort(12);
try {
  port.open();
} catch(PortDeviceFailure e){
  reportError(e);
  logger.log(e.getMessage(), e);
} finally {
  ...
}

public class LocalPort {
  private ACMEPort innerPort;
  public LocalPort(int portNumber) {
    innerPort = new ACMEPort(portNumber);
  }
  
  // port.open()ì‹œ ë°œìƒí•˜ëŠ” checked exceptionë“¤ì„ ê°ì‹¸ë„ë¡ portë¥¼ ê°€ì§€ëŠ” LocalPort í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤.
  // port.open()ì´ ë˜ì§€ëŠ” checked exceiptionë“¤ì„ í•˜ë‚˜ì˜ PortDeviceFailure exceptionìœ¼ë¡œ ê°ì‹¸ì„œ ë˜ì§„ë‹¤.
  public void open() {
    try {
      innerPort.open();
    } catch (DeviceResponseException e) {
			  throw new PortDeviceFailure(e);
		} catch (ATM1212UnlockedException e) {
			  throw new PortDeviceFailure(e);
		} catch (GMXError e) {
			  throw new PortDeviceFailure(e);
  	}
  }
}
```



## 04. ì‹¤ë¬´ ì˜ˆì™¸ ì²˜ë¦¬ íŒ¨í„´

**getOrElse**ë¡œ ì•ˆë˜ë©´ **getOrElseThrow** ë¡œ ì²˜ë¦¬í•œë‹¤.

- getOrElse
  - ì˜ˆì™¸ ëŒ€ì‹  ê¸°ë³¸ ê°’ì„ ë¦¬í„´í•œë‹¤.
    1. nullì´ ì•„ë‹Œ ê¸°ë³¸ ê°’
    2. ê·¸ê²Œ ì•„ë‹ˆë¼ë©´, ë„ë©”ì¸ì— ë§ëŠ” ê¸°ë³¸ ê°’
- getOrElseThrow
  - null ëŒ€ì‹  ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤. (ê¸°ë³¸ê°’ì´ ì—†ë‹¤ë©´)



```java
// ğŸ‘¹ case1. getOrElse - nullì´ ì•„ë‹Œ ê¸°ë³¸ê°’ì„ ë¦¬í„´í•œë‹¤.

// BAD
// nullì„ ë¦¬í„´í•˜ë©´ ì´í›„ ëª¨ë“  ì½”ë“œì—ì„œ null ì²´í¬ê°€ ìˆì–´ì•¼ í•˜ëŠ”ë°, ë‹¤ë¥¸ ë°©ë²•ì´ ì—†ì„ê¹Œ?
List<Employee> employees = getEmployees();
if (employees != null){
  for(Employee e : employees) {
    totalPay += e.getPay();
  }
}

// GOOD
// ë³µìˆ˜í˜• ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•ŒëŠ” ë°ì´í„°ì˜ ì—†ìŒì„ ì˜ë¯¸í•˜ëŠ” ì»¬ë ‰ì…˜ì„ ë¦¬í„´í•˜ë©´ ëœë‹¤,
// null ë³´ë‹¤ sizeê°€ 0ì¸ ì»¬ë ‰ì…˜ì´ í›¨ì”¬ ì•ˆì „í•˜ë‹¤.
List<Employee> employees = getEmployees();
for(Employee e : employees) {
  totalPay += e.getPay();
}

public List<Employee> getEmployees() {
  if ( .. there are no employees .. ) {
    return Collections.empltyList();
  }
}



// ë¹ˆ ì»¬ë ‰ì…˜, ë¹ˆ ë¬¸ìì—´ì„ ì ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ë¼ë©´?
// ğŸ‘¹ case2. getOrElse - ë„ë©”ì¸ì— ë§ëŠ” ê¸°ë³¸ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.

// BAD
// í˜¸ì¶œë¶€ì—ì„œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í†µí•´ userLevelê°’ì„ ì²˜ë¦¬í•˜ëŠ”ë°, ì´ë ‡ê²Œ ë˜ë©´ ì½”ë“œë¥¼ ê³„ì† ì½ì–´ë‚˜ê°€ë©´ì„œ ë…¼ë¦¬ì  íë¦„ì´ ëŠê¸´ë‹¤.
UserLevel userLevel = null;
try {
  User user = userRepository.findByUserId(userId); // userNotFoundException
  userLevel = user.getUserLevel();
} catch (UserNotFoundException e) {
  userLevel = UserLevel.BASIC;
}

// GOOD
// ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ìª½ì—ì„œ ì²˜ë¦¬í•´ í˜¸ì¶œë¶€ ì½”ë“œê°€ ì‹¬í”Œí•´ì§„ë‹¤.
// ì½”ë“œë¥¼ ì½ì–´ê°€ë©° ë…¼ë¦¬ì ì¸ íë¦„ì´ ëŠê¸°ì§€ ì•ŠëŠ”ë‹¤.
// ë„ë©”ì¸ì— ë§ëŠ” ê¸°ë³¸ê°’ì„ ë„ë©”ì¸ ì„œë¹„ìŠ¤ì—ì„œ ê´€ë¦¬í•œë‹¤.

// í˜¸ì¶œë¶€
UserLevel userLevel = userService.getUserLevelOrDefault(userId);

// ì œê³µë¶€
public class UserService {
  private static final UserLevel USER_BASIC_LEVEL = UserLevel.BASIC;
  
  public UserLevel getUserLevelOrDefaul(Long userId) {
    try {
      User user = userRepository.findByUserId(userId);
      return user.getUserLevel();
    } catch (UserNotFoundException e) {
      return USER_BASIC_LEVEL;
    }
  }
}



// ë„ë©”ì¸ì— ë§ëŠ” ê¸°ë³¸ê°’ì¡°ì°¨ ì—†ë‹¤ë©´?
// ğŸ‘¹ case3. getOrElseThrow - null ëŒ€ì‹  ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤
// null ì²´í¬ ì§€ì˜¥ì—ì„œ ë²—ì–´ë‚˜ê¸° ìœ„í•´

// BAD
// null ì²´í¬ ë¹ ì§„ ë¶€ë¶„ì´ ë°œìƒí•´ë„ ì•Œì•„ì°¨ë¦¬ê¸° í˜ë“¤ ìˆ˜ ìˆëŠ” ë“±, ì½”ë“œ ê°€ë…ì„±ì´ í˜„ì €íˆ ë–¨ì–´ì§„ë‹¤.
public void registerItem(Item item) {
  if(item != null) {
    ItemRegistry registry = peristenStore.getIemRegistry();
    if (registry != null) {
      Item existing = registry.getItem(item.getID());
      if (existing.getBillingPeriod().hasRetailOwner()) {
        existing.register(item);
      }
    }
  }
}

// BAD
// í˜¸ì¶œë¶€ì—ì„œ ë§¤ë²ˆ null ì²´í¬í•´ì•¼ í•˜ëŠ”ë°, ê°€ë…ì„±ë¿ ì•„ë‹ˆë¼ ì•ˆì •ì„±ë„ ë–¨ì–´ì§„ë‹¤.
User user = userRepository.findByUserId(userId);
if (user != null){
  // userë¥¼ ì´ìš©í•œ ì²˜ë¦¬
}

// GOOD
// í˜¸ì¶œë¶€ ê°€ë…ì„±ì´ ì˜¬ë¼ê°„ë‹¤.
// ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°ì—” ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤.
// ë§¤ë²ˆ null ì²´í¬í•  í•„ìš”ê°€ ì—†ì–´ ì•ˆì „í•˜ê²Œ ë°ì´í„° ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ.

// í˜¸ì¶œë¶€
User user = userService.getUserOrElseThrow(userId);

// ì œê³µë¶€
public class UserService {
  private static final UserLevel USER_BASIC_LEVEL = UserLevel.BASIC;
  
  public User getUserOrElseThrow(Long userId) {
    User user = userRepository.findByUserId(userId);
    if(user == null) {
      throw new IllegalArgumentException("User is not found. userId = " + userId)
    }
    return user;
  }
}

```

### ì‹¤ë¬´ì—ì„œëŠ” ë³´í†µ ìì‹ ì˜ ì˜ˆì™¸ë¥¼ ì •ì˜í•œë‹¤.

- ì—ëŸ¬ ë¡œê·¸ì—ì„œ stacktrace í•´ë´¤ì„ ë•Œ ìš°ë¦¬ê°€ ë°œìƒì‹œí‚¨ ì˜ˆì™¸ë¼ëŠ” ê²ƒì„ ë°”ë¡œ ì¸ì§€í•  ìˆ˜ ìˆë‹¤
- ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ì™€ ì„ì´ì§€ ì•ŠëŠ”ë‹¤. ìš°ë¦¬ë„ IllegalArgumentExceptionì„ ë˜ì§€ëŠ” ê±°ë³´ë‹¤ ìš°ë¦¬ ì˜ˆì™¸ë¡œ ë˜ì§€ëŠ”ê²Œ ì–´ëŠ ë¶€ë¶„ì—ì„œ ì—ëŸ¬ê°€ ë‚¬ëŠ”ì§€ íŒŒì•…í•˜ê¸°ì— ìš©ì´í•˜ë‹¤.
- ìš°ë¦¬ ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•œ ì—ëŸ¬ì˜ ì¢…ë¥˜ë¥¼ ë‚˜ì—´í•  ìˆ˜ ìˆë‹¤.

```java
public class MyProjectException extends RuntimeException {
  private MyErrorCode errorCode;
  private String errorMessage;
  
  public MyProjectException(MyErrorCode errorCode) {
    // ..
  }
  
  public MyProjectExceiption(MyErrorCode errorCode, String errorMessage) {
    // ..
  }
}

public enum MyErrorCode {
  private String defaultErrorMessage;
  
  INVALID_REQUEST("ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤."),
  DUPLLICATED_REQUEST("ê¸°ì¡´ ìš”ì²­ê³¼ ì¤‘ë³µë˜ì–´ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),
  // ,,,
  INTERNAL_SERVER_ERROR("ì²˜ë¦¬ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
}

// í˜¸ì¶œë¶€
if(request.getUserName() == null) {
  throw new MyProjectException(ErrorCode.INVALID_REQUEST, "userName is null");
}
```



## 05. ì˜¤í”ˆì†ŒìŠ¤ ì† Exception ì‚´í´ë³´ê¸°

